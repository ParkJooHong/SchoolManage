<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<!-- jQuery CDN Ï∂îÍ∞Ä -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<link rel="stylesheet" href="/css/content/stu/weather/WeatherStyle.css">
	<link rel="stylesheet" type="text/css" href="/css/content/chatbot/chatbot.css">
</head>

<body>
	<th:block th:fragment="headerFragment">
		<div class="row h-100 header_wrap align-items-center">
			<div class="col-7">
				<img src="/image/khLogo3.png" width="190px" style="margin-left: 10px">
				<span>ÌïôÏÇ¨ÌñâÏ†ïÏõπÏÑúÎπÑÏä§</span>
				<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#weatherModal">
					ÎÇ†Ïî®Ï†ïÎ≥¥
				</button>

				<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#chatModal">
					ÌïôÏÉùÏ±óÎ¥áÎèÑÏö∞ÎØ∏
				</button>
			</div>
			<div class="col-5 header_member">
				<div class="row me-3">
					<div class="col">
						<span id="timer">üï¶60:0</span>
						<span>
							<input type="button" value="Ïó∞Ïû•" class="btn btn-primary" onclick="resetTimer();">
						</span>
						<span>
							<input type="hidden" id="memNo" th:value="${#authentication.name}">
						</span>
						<button class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown"
							aria-expanded="false">[[${#authentication.principal.memName}]]</button>
						<ul class="dropdown-menu">
							<li><a href="javascript:void(0)" data-bs-toggle="modal"
									data-bs-target="#changeInfoModal">Í∞úÏù∏Ï†ïÎ≥¥Î≥ÄÍ≤Ω</a></li>
							<li><a data-bs-toggle="modal" data-bs-target="#passwordChangeModal">ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω</a>
							</li>
							<hr>
							<li><a href="/member/logout">Î°úÍ∑∏ÏïÑÏõÉ</a></li>
						</ul>
						<span class="msg_btn_wrap"></span>
					</div>
				</div>
			</div>
		</div>
		<span sec:authorize="hasRole('ROLE_ADMIN')">
			<input type="hidden" id="adminSubMenuVO" th:value="${adminSubMenuVO.menuCode}">
			<!-- ROLE_ADMIN Í∂åÌïúÏù¥ ÏûàÎäî Í≤ΩÏö∞ÏóêÎßå ÌëúÏãú -->
		</span>
		<span sec:authorize="hasRole('ROLE_STU')">
			<input type="hidden" id="memberSubMenuVO" th:value="${memberSubMenuVO.menuCode}">
			<!-- ROLE_MEMBER Í∂åÌïúÏù¥ ÏûàÎäî Í≤ΩÏö∞ÏóêÎßå ÌëúÏãú -->
		</span>
		<span sec:authorize="hasRole('ROLE_PRO')">
			<input type="hidden" id="professorSubMenuVO" th:value="${professorSubMenuVO.menuCode}">
			<!-- ROLE_PROFESSOR Í∂åÌïúÏù¥ ÏûàÎäî Í≤ΩÏö∞ÏóêÎßå ÌëúÏãú -->
		</span>

		<!-- Í∞úÏù∏Ï†ïÎ≥¥ Î≥ÄÍ≤Ω Î™®Îã¨ -->
		<div class="modal fade" id="changeInfoModal" tabindex="-1" aria-labelledby="exampleModalLabel"
			aria-hidden="true">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<h1 class="modal-title fs-5" id="exampleModalLabel">Í∞úÏù∏Ï†ïÎ≥¥ Î≥ÄÍ≤Ω</h1>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<form action="/member/changeMemInfo" method="post" id="changeInfoForm">
							<div class="row">
								<div class="col-12">
									<div class="row">
										<div class="col-12">
											<table class="detail_info">
												<tr>
													<td>Ïù¥Î©îÏùº</td>
													<td class="d-grid">
														<div class="row">
															<div class="col-9">
																<input type="text" name="memEmail" id="changeMail"
																	required class="form-control">
															</div>
															<div class="col-3 d-grid">
																<input type="button" value="Î©îÏùºÏù∏Ï¶ù Î≤àÌò∏Ï†ÑÏÜ°"
																	onclick="sendCatiMail();" class="btn btn-primary">
															</div>
														</div>
													</td>
												</tr>
												<tr>
													<td>Ïù¥Î©îÏùº Ïù∏Ï¶ùÎ≤àÌò∏</td>
													<td class="d-grid">
														<div class="row">
															<div class="col-9">
																<input type="password" class="form-control"
																	id="catifiNumByMail" placeholder="Ïù∏Ï¶ùÎ≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"
																	readonly>
															</div>
															<div class="col-3 d-grid">
																<input type="button" value="Î©îÏùº Î≥ÄÍ≤Ω"
																	onclick="checkByCatiNum();" disabled
																	id="mailCatiBtn" class="btn btn-primary">
															</div>
														</div>
													</td>
												</tr>
												<tr>
													<td>Ïó∞ÎùΩÏ≤ò</td>
													<td class="d-grid">
														<div class="row">
															<div class="col-9">
																<input type="text" class="form-control" name="memTell"
																	id="changeTell" maxlength="13"
																	oninput="autoHyphen3(this)">
															</div>
															<div class="col-3 d-grid">
																<input type="button" class="btn btn-primary"
																	value="Î≤àÌò∏Ïù∏Ï¶ù Î≤àÌò∏Ï†ÑÏÜ°" onclick="sendSms()">
															</div>
														</div>
													</td>
												</tr>
												<tr>
													<td>Ïó∞ÎùΩÏ≤ò Ïù∏Ï¶ùÎ≤àÌò∏</td>
													<td class="d-grid">
														<div class="row">
															<div class="col-9">
																<input type="password" class="form-control" id="smsNum"
																	placeholder="Ïù∏Ï¶ùÎ≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî">
															</div>
															<div class="col-3 d-grid">
																<input type="button" class="btn btn-primary" disabled
																	id="tellCatiBtn" value="Î≤àÌò∏ Î≥ÄÍ≤Ω"
																	onclick="updateMemTell()">
															</div>
														</div>
													</td>
												</tr>
												<tr>
													<td>Ïù¥Î¶Ñ</td>
													<td class="d-grid">
														<div class="row">
															<div class="col-9">
																<input type="text" class="form-control" name="memName"
																	id="changeName">
															</div>
															<div class="col-3 d-grid">
																<input type="button" class="btn btn-primary"
																	value="Ïù¥Î¶Ñ Î≥ÄÍ≤Ω" onclick="updateMemInfo('memName')">
															</div>
														</div>
													</td>
												</tr>
												<tr>
													<td>Ï£ºÏÜå</td>
													<td>
														<div class="row">
															<div class="col-9 d-grid">
																<input type="text" name="memAddr" required
																	id="changeAddress" readonly onclick="searchAddr();">
															</div>
															<div class="col-3 d-grid">
																<input type="button"
																	class="btn btn-primary addr_search_btn"
																	onclick="searchAddr();" value="Ï£ºÏÜåÏ∞æÍ∏∞">
															</div>
														</div>

													</td>
												</tr>
												<tr>
													<td>ÏÉÅÏÑ∏Ï£ºÏÜå</td>
													<td class="d-grid">
														<div class="row">
															<div class="col-9">
																<input type="text" class="form-control"
																	name="memAddrDetail" id="changeAddrDetail" required
																	placeholder="ÏÉÅÏÑ∏Ï£ºÏÜå ÏûÖÎ†•ÏùÄ ÌïÑÏàòÏûÖÎãàÎã§.">
															</div>
															<div class="col-3 d-grid">
																<input type="button" class="btn btn-primary"
																	value="Ï£ºÏÜå Î≥ÄÍ≤Ω" onclick="updateMemInfo('memAddr')">
															</div>
														</div>
													</td>
												</tr>
											</table>
										</div>
									</div>
									<div class="row">
										<div class="col d-grid">
											<input type="button" onclick="closeModal();" id="changeBtn"
												class="btn btn-primary" value="Îã´Í∏∞">
										</div>
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>






		<!-- ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω Î™®Îã¨  -->
		<div class="modal fade" id="passwordChangeModal" tabindex="-1">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<div class="row justify-content-center">
							<div class="col">
								<div class="row mt-3 mb-3">
									<div class="col-8">
										<table class="table">
											<colgroup>
												<col width="40%">
												<col width="*">
											</colgroup>
											<tr>
												<td>ÌòÑÏû¨ ÎπÑÎ∞ÄÎ≤àÌò∏</td>
												<td>
													<input type="hidden" id="memId" th:value="${#authentication.name}">
													<input type="password" id="nowPwd" class="form-control">
												</td>
											</tr>
											<tr>
												<td>Î≥ÄÍ≤ΩÌï† ÎπÑÎ∞ÄÎ≤àÌò∏</td>
												<td>
													<input type="password" id="changePwd" class="form-control">
												</td>
											</tr>
											<tr>
												<td>ÎπÑÎ∞ÄÎ≤àÌò∏ Ï§ëÎ≥µ Ï≤¥ÌÅ¨</td>
												<td>
													<input type="password" id="checkPwd" class="form-control">
												</td>
											</tr>
										</table>
									</div>
								</div>
								<div class="row">
									<div class="col d-gird">
										<input type="button" value="ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω" onclick="updatePwByCk();"
											class="btn btn-primary">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>



		<div class="modal fade" id="weatherModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog"
				style="position: fixed; top: 5%; left: 5%; right: 5%; bottom: 5%; display: flex; align-items: center; justify-content: center; width: 80%; height: 80%;">
				<div class="modal-content"
					style="max-width: 100%; max-height: 100%; background: #fff; padding: 20px; border-radius: 8px; overflow: auto;">
					<div class="modal-header" style="margin-bottom: 20px;">
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<!-- ÎÇ†Ïî® ÌÅ¥Î¶≠ÌñàÏùÑ Îïå Î™®Îã¨ Î∞îÎîî ÏïàÏóê Îì§Ïñ¥Í∞à ÎÇ†Ïî® API ÎÇ¥Ïö© -->
					<div class="weathermodal-body">
						<link rel="stylesheet" href="/css/content/stu/weather/WeatherStyle.css">
						<div container="weatherModal-container">
							<div class="weathersearch-box">
								<i class="fa-solid fa-location-dot"></i>
								<input type="text" placeholder="ÏòÅÎ¨∏ÏúºÎ°ú ÏúÑÏπò ÏûÖÎ†•!">
								<button class="fa-solid fa-magnifying-glass"></button>
							</div>

							<div class="not-found">
								<img src="/image/weatherimage/404.png" alt="Weather Image">
								<p>ÎÇ†Ïî®Ï†ïÎ≥¥Í∞Ä ÏóÜÏñ¥Ïöî! :/</p>
							</div>

							<div class="weather-box">
								<img src="">
								<p class="temperature"></p>
								<p class="description"></p>
							</div>

							<div class="weather-details">
								<div class="humidity">
									<i class="fa-solid fa-water"></i>
									<div class="text">
										<span></span>
										<p>ÏäµÎèÑ</p>
									</div>
								</div>
								<div class="wind">
									<i class="fa-solid fa-wind"></i>
									<div class="text">
										<span></span>
										<p>ÌíçÏÜç</p>
									</div>
								</div>
							</div>
						</div>
						<script src="https://kit.fontawesome.com/7c8801c017.js" crossorigin="anonymous"></script>
						<script src="/js/content/weather/weatherFunction.js"></script>
					</div>



					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Îã´Í∏∞</button>
					</div>
				</div>
			</div>
		</div>



		<!-- Chatgpt Modal Ï≥áÏßÄÌîºÌã∞ Î™®Îã¨ -->
		<!-- Î™®Îã¨ ÏöîÏÜå -->
		<div class="modal fade" id="chatModal" tabindex="-1" aria-labelledby="chatModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<!-- Î™®Îã¨ Ìó§Îçî Î∂ÄÎ∂Ñ Ï∂îÍ∞Ä -->
					<div class="modal-header">

						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>


					<!-- Î™®Îã¨ Î∞îÎîî Î∂ÄÎ∂ÑÏóê ÏΩîÎìú Ï∂îÍ∞Ä -->
					<div class="Chatmodal-body">
						<link rel="stylesheet" type="text/css" href="/css/content/chatbot/chatbot.css">
						<div class="AllChatcontainer">
							<div class="Chatheader">
								<h3>KHÎåÄÌïôÍµê ÌïôÏÉù Ïõπ ÏÑúÎπÑÏä§ Ï±óÎ¥á</h3>
							</div>

							<div class="info">
								<a href="" target="_blank"> ÌïôÏÇ¨Í¥ÄÎ¶¨ ÏãúÏä§ÌÖú </a>
								<!-- ÌïôÏÇ¨ Í¥ÄÎ¶¨ ÏãúÏä§ÌÖúÏúºÎ°ú Î¶¨Îã§Ïù¥Î†âÌä∏ -->
							</div>

							<div class="chat-container">
								<div id="chat-log"></div>
							</div>

							<div class="input-container">
								<input type="text" id="user-input" placeholder="Î©îÏÑ∏ÏßÄÎ•º Î≥¥ÎÇ¥Ï£ºÏÑ∏Ïöî." />
								<button id="send-button">
									<i class="fa-solid fa-paper-plane" id="button-icon"></i>
								</button>
							</div>
						</div>
					</div>

					<script src="/js/content/chatbot/chatbot.js"></script>

					<!-- Î™®Îã¨ Ìë∏ÌÑ∞ Î∂ÄÎ∂Ñ Ï∂îÍ∞Ä-->
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Îã´Í∏∞</button>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript" src="/js/content/member/change_mem_pw.js"></script>
		<script type="text/javascript" src="/js/content/member/change_mem_info.js"></script>
	</th:block>
</body>

</html>