<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{fragment/info_layout}">

<th:block layout:fragment="content_css">
   <link rel="stylesheet" href="/css/content/board/totalBoard.css">
</th:block>

<th:block layout:fragment="content">

<div style="text-align: center;"> 
	<div style="text-align: center;"> 
		<div class="container">
			<div class="content" id="boardContent">
			  <div class="row justify-content-center">
				<div class="col-md-12">
				  <table class="table table-custom">
					<tr>
					  <td>
					  	<div class="page_title" >
							<h4 style="text-align: center;">[[${memberVO.deptVO.deptName}]] ê²Œì‹œíŒ</h4>
					  	</div>
					  </td>
					</tr>
				  </table>
				  <form th:action="@{/board/deptBoard}" method="post" id="month-form">
				  	<input type="hidden" value="" name="month">
				  </form>
				  <form th:action="@{/board/deptBoard}" method="post" id="orderBy">
				  	<input type="hidden" value="" name="orderBy">
				  </form>
				  
				  <div class="row">
					  <div class="order col-6">				  
					  	 <input type="button" th:classappend="${uniBoardVO.orderBy == 'REG_BOARD_DATE_ORDER' ? 'btn-primary' : 'btn-secondary'}" class="btn" id="orderDate" value="ìµœê·¼ìˆœ" onclick="getOrderList('REG_BOARD_DATE_ORDER');" th:data-order-by="REG_BOARD_DATE_ORDER">
					    <input type="button" th:classappend="${uniBoardVO.orderBy == 'READ_CNT' ? 'btn-primary' : 'btn-secondary'}" class="btn" id="orderRead" value="ì¡°íšŒìˆœ" onclick="getOrderList('READ_CNT');" th:data-order-by="READ_CNT">
					    <input type="button" th:classappend="${uniBoardVO.orderBy == 'REPLY_CNT' ? 'btn-primary' : 'btn-secondary'}" class="btn" id="orderReply" value="ëŒ“ê¸€ìˆœ" onclick="getOrderList('REPLY_CNT');" th:data-order-by="REPLY_CNT">  		
					  </div>
					  <div class="col-6 text-end">
					  		<form th:action="@{/board/deptBoard}" method="post">
								  <div class="btn-group">
								  	<select class="form-control searchKeyword"  name="searchKeyword">
										<option  value="BOARD_TITLE" th:selected="${uniBoardVO.searchKeyword == 'BOARD_TITLE'}">ì œëª©</option>
										<option  value="BOARD_CONTENT"  th:selected="${uniBoardVO.searchKeyword == 'BOARD_CONTENT'}">ë‚´ìš©</option>
										<option  value="BOARD_WRITER"  th:selected="${uniBoardVO.searchKeyword == 'BOARD_WRITER'}">ì‘ì„±ì</option>
										<!-- ì…€ë ‰íŠ¸ ë°•ìŠ¤ ì˜µì…˜ ì¶”ê°€ -->
							 		 </select>
								  	<input type="text" class="form-control searchValue" placeholder="ê²€ìƒ‰í•  í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”" name="searchValue" style="width: 200px;"/>
								  	<input type="button" value="ê²€ìƒ‰" class="btn btn-danger mx-2" onclick="searchOrder();">
								  </div>
							  </form>	  	
					  </div>	
				  </div>
		  		<div class="detail_info" id="my-scroll">
				  <table class="table">
					<thead>
					  <tr>
						<th>No</th>
						<th>ë¶„ë¥˜</th>
						<th>ê¸€ì“´ì´</th>
						<th>ê¸€ ì œëª©</th>
						<th>ì‘ì„±ì¼</th>
						<th>ì¡°íšŒìˆ˜</th>
					  </tr>
					</thead>
					<tbody>
					<th:block th:if="${#lists.size(uniBoardList) == null}">
						<tr>
							<td colspan="6">ì‘ì„±ëœ ê²Œì‹œê¸€ ì—†ìŠµë‹ˆë‹¤.</td>
						</tr>
					</th:block>
					<th:block th:if="${#lists.size(uniBoardList) != 0}">
						<tr th:each="uniBoard, state : ${uniBoardList}">
							<td>[[${state.count}]]</td>
							<td>[[${uniBoard.cateName}]]</td>
							<td>[[${uniBoard.boardWriter}]]</td>
							<td th:if="${uniBoard.isPrivate !='N'} and ${uniBoard.replyCnt != 0}">
								<a href="#" th:onclick="checkPwd( [[${uniBoard.isPrivate}]] , [[${uniBoard.boardNo}]], [[${menuCode}]], [[${subMenuCode}]], [[${uniBoard.readCnt}]]);" class="title"> 
									ğŸ”’ [[${uniBoard.boardTitle}]]  <span class="replyColor">([[${uniBoard.replyCnt}]])</span>
								</a>
							</td>
							<td th:if="${uniBoard.isPrivate !='N'} and ${uniBoard.replyCnt == 0}">
								<a href="#" th:onclick="checkPwd( [[${uniBoard.isPrivate}]] , [[${uniBoard.boardNo}]], [[${menuCode}]], [[${subMenuCode}]], [[${uniBoard.readCnt}]]);" class="title"> 
									ğŸ”’ [[${uniBoard.boardTitle}]]
								</a>
							</td>
							<td th:if="${uniBoard.isPrivate =='N'} and ${uniBoard.replyCnt != 0}">
								<a th:href="@{/board/boardDetail(menuCode=${menuCode}, subMenuCode=${subMenuCode}, boardNo=${uniBoard.boardNo}, readCnt=${uniBoard.readCnt} )}" class="title">
									[[${uniBoard.boardTitle}]]  <span class="replyColor">([[${uniBoard.replyCnt}]])</span>
								</a>
							</td>
							<td th:if="${uniBoard.isPrivate =='N'} and ${uniBoard.replyCnt == 0}">
								<a th:href="@{/board/boardDetail(menuCode=${menuCode}, subMenuCode=${subMenuCode}, boardNo=${uniBoard.boardNo}, readCnt=${uniBoard.readCnt} )}" class="title">
									[[${uniBoard.boardTitle}]] 
								</a>
							</td>
							<td>[[${uniBoard.regBoardDate}]]</td>
							<td>[[${uniBoard.readCnt}]]</td>
						</tr>
					</th:block>
					</tbody>
				  </table>
				  </div>
				</div>
			  </div>
			</div>
		  </div>
	</div>
</div>
	<div class="row">
		<div class="col text-end"> 
		<!-- bootstrapì—ì„œ ì´ë¯¸ ë””ìì¸í•œ ê²ƒì„ ëŒì–´ì˜¨ ê²ƒì´ë‹¤. -->
				
		</div>
	</div>

<div class="boardWriterGoSize">
 <button class="btn btn-danger boardWriteGo"><span data-bs-toggle="modal" data-bs-target="#writeModal" style="cursor: pointer;">ê¸€ì“°ê¸° </span> </button>
</div>

<!-- ê¸€ì“°ê¸° ëª¨ë‹¬ -->
<div class="modal fade" id="writeModal" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">ê²Œì‹œê¸€ ì‘ì„±</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
   
	      <div class="modal-body boardWriters">
						<form class="row g-3" th:action="@{/stuMenu/boardWrite}" method="post"> <!-- ë¼ë²¨(label) ì•ˆì¨ë„ë¨.  -->
							<input type="hidden" th:value="${menuCode}" name="menuCode"> 
							<input type="hidden" th:value="${subMenuCode}" name="subMenuCode"> 
							<div>						
							<label for="memId" class="form-label"></label> 							
								<th:block th:each="member : ${memberVO}">
									<input type="hidden" class="boardWriter" th:name="boardWriter" th:value="${member.stuVO.stuNo}">
									<div sec:authorize="hasRole('ROLE_ADMIN')">
										<input type="hidden" class="deptNo" th:value="${member.empVO.deptNo}">
									</div>
									<div sec:authorize="hasRole('ROLE_PRO')">
										<input type="hidden" class="deptNo" th:value="${member.empVO.deptNo}">
									</div>
									<div sec:authorize="hasRole('ROLE_STU')">
										<input type="hidden" class="deptNo" th:value="${member.stuVO.deptNo}">
									</div>
									ì‘ì„±ì : [[${member.memName}]] / [[${member.memNo}]]
								</th:block>
							</div>
							<div class="col-5">
								<label for="boardTitle" class="form-label">ì œëª©</label> 
								<input type="text" class="form-text boardTitle" id="boardTitle" name="boardTitle" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”.">
							</div>	
 							<div class="col-5"> 
								<label for="memId" class="form-label">ì¹´í…Œê³ ë¦¬</label> 
								<select th:name="cateNo" class="cateNo">
									<th:block th:each="boardCategory : ${boardCategoryVO}">
										<option th:value="${boardCategory.cateNo}">[[${boardCategory.cateName}]]</option>
									</th:block>
								</select>
							</div>						
							<!-- <div class="my-invalid"> IDê°€ ì˜ëª»ë¬ì–´ìš”.</div> -->												
							<br>
							<div class="col-12">
								<label for="boardContent" class="form-label">ê²Œì‹œê¸€ ë‚´ìš©</label> 
								<textarea class="form-control boardContent" rows="10" cols="25" name="boardContent"></textarea>
							</div>
							<!-- <div class="col-12">
								<label for="boardTitle" class="form-label">ì²¨ë¶€ íŒŒì¼ </label> 
								<input type="radio" > ì˜ˆ 
							</div> -->
							<div class="col-12">
								<div class="col-6" >
									<label for="boardTitle" class="form-label">ë¹„ë°€ê¸€ ì—¬ë¶€ : </label> 
									<input type="radio" class="isPrivate" name="isPrivate" value="Y" onclick="private();"> ì˜ˆ 
									<input type="radio" class="isPrivate" name="isPrivate" value="N" checked onclick="noPrivate();"> ì•„ë‹ˆì˜¤
								</div>
								<div class="pwd">
									<span class="inputPwd"></span>
								</div>
								<!-- <div class="col-3">
									<label for="boardTitle" class="form-label">ê³µì§€ì‚¬í•­ ì—¬ë¶€ : </label> 
									<input type="radio" class="isNotice" name="isNotice" value="Y" > ì˜ˆ 
									<input type="radio" class="isNotice" name="isNotice" value="N" checked> ì•„ë‹ˆì˜¤
								</div> -->
							</div>					
							<br>
							<div class="col-12 d-grid">
							
								<input type="button" value="ê²Œì‹œê¸€ ë“±ë¡" class="btn btn-primary" th:onclick="success();">
						</div>
						</form>					
			</div>
    </div>
  </div>
</div>
<input type="hidden" th:value="${memberVO.deptVO.deptNo}" class="deptNo">

<!-- ìµœì‹ , ëŒ“ê¸€, ì¡°íšŒ ìˆœ ì •ë ¬ -->
<form th:action="@{/board/deptBoard}" method="post" id="test_orderBy">
	<input type="hidden" name="orderBy" value="">
	<input type="hidden" name="searchKeyword" value="">
	<input type="hidden" name="searchValue" value="">
</form>

<!-- ì„œì¹˜ í‚¤ì›Œë“œ ì •ë ¬ -->
<form th:action="@{/board/deptBoard}" method="post" id="searchKeyword">
	<input type="hidden" name="orderBy" value="">
	<input type="hidden" name="searchKeyword" value="">
	<input type="hidden" name="searchValue" value="">
</form>


<th:block layout:fragment="content_js">
<script type="text/javascript" src="/js/content/publicBoard/deptBoard.js"></script>
</th:block>

</html>