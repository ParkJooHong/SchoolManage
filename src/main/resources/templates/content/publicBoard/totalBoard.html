<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{fragment/__${memLayOut}___layout}">

<th:block layout:fragment="content_css">
   <link rel="stylesheet" href="/css/content/board/totalBoard.css">
</th:block>

<th:block layout:fragment="content">

<br>

<div style="text-align: center;"> 
	<div style="text-align: center;"> 
		<div class="container h-100">
			<div class="content" id="boardContent">
			  <div class="row justify-content-center">
				<div class="col-md-12">
				  <table class="table table-custom">
					<tr>
					  <td>
						<h4 style="text-align: center;">전체 게시판</h4>
					  </td>
					</tr>
				  </table>
				  <form th:action="@{/board/board}" method="post" id="month-form">
				  	<input type="hidden" value="" name="month">
				  	<input type="hidden" th:value="${menuCode}" name="menuCode"> 
					<input type="hidden" th:value="${subMenuCode}" name="subMenuCode"> 
				  </form>
				  <form th:action="@{/board/board}" method="post" id="orderBy">
				  	<input type="hidden" value="" name="orderBy">
				  	<input type="hidden" th:value="${menuCode}" name="menuCode"> 
					<input type="hidden" th:value="${subMenuCode}" name="subMenuCode"> 
				  </form>
				  <form th:action="@{/board/board}" method="post" id="categoryList">
				  	<input type="hidden" value="" name="categoryList">
				  </form>
				  <table class="table">
					<tbody>
					  <tr>
					  	<td>
							<div class="row mb-3">
								<div class="col-6 mb-3">
									<div class="row-3">
										<input type="button" class="btn btn-primary" value="전체" onclick="searchList(0);"> 
										<input type="button" class="btn btn-primary" value="최근 1개월" onclick="searchList(-1);">
										<input type="button" class="btn btn-primary" value="최근 3개월" onclick="searchList(-3);">
									</div>
			
									<div class="row-9 text-end"></div>
								</div>
								
								<div class="col-6 text-end">
									<form th:action="@{/board/board}" method="post" id="month-form">
								
									<input type="date" name="fromDate" placeholder="이달의 첫날" th:value="${uniBoardFromDate}" >
									<input type="date" placeholder="이달의 마지막날"  name="toDate" th:value="${uniBoardToDate}"> 
								
									<input type="submit" class="btn btn-primary" value="검색">
									<input type="hidden" th:value="${menuCode}" name="menuCode"> 
									<input type="hidden" th:value="${subMenuCode}" name="subMenuCode"> 
									 </form>
									
								</div>
							</div>
						</td>

						<td>	
						  <form th:action="@{/board/board}" method="post">
							  <div class="btn-group">
							  	<input type="hidden" th:value="${menuCode}" name="menuCode"> 
								<input type="hidden" th:value="${subMenuCode}" name="subMenuCode"> 
							  	<select class="form-control"  name="searchKeyword">
									<option  value="BOARD_TITLE">제목</option>
									<option  value="BOARD_CONTENT" >내용</option>
									<option  value="BOARD_WRITER" >작성자</option>
									<!-- 셀렉트 박스 옵션 추가 -->
							  </select>
							  	<input type="text" class="form-control" placeholder="검색할 키워드를 입력하세요" name="searchValue" style="width: 200px;"/>
							  	<input type="submit" value="검색" class="btn btn-primary mx-2">
								
								<!-- <button class="btn btn-danger" th:onclick="|location.href='@{/board/boardWrite}'|" >글쓰기</button> -->
							  </div>
						  </form>
						</td>
					  </tr>
					</tbody>
				  </table>
				  <div style="display: flex;">
					  <div class="order" style="text-align: left; flex: 1;">
					    <input type="button" class="btn btn-secondary" id="orderDate" value="날짜순" onclick="getOrderListDesc('REG_BOARD_DATE');">
					    <input type="button" class="btn btn-secondary" id="orderRead" value="조회순" onclick="getOrderListDesc('READ_CNT');">
					    <input type="button" class="btn btn-secondary" id="orderReply" value="댓글순" onclick="getOrderListDesc('REPLY_CNT');">  	
					  </div>
					  <div class="categoryList" style="text-align: right; flex: 1;">
					 	 <input type="button" class="btn btn-danger" id="orderDate" value="전체" onclick="cateList('CATE_001');">
					    <input type="button" class="btn btn-danger" id="orderDate" value="질문" onclick="cateList('CATE_003');">
					    <input type="button" class="btn btn-danger" id="orderRead" value="잡담" onclick="cateList('CATE_004');">
					    <input type="button" class="btn btn-danger" id="orderReply" value="정보" onclick="cateList('CATE_005');">
					  </div>					  
					</div>					
				  <br>
				 
				  
		  		<div class="detail_info">
				  <table class="table">
				  	<colgroup>
				  		<col style="width: 5%;">
				  		<col style="width: 15%;">
				  		<col style="width: 20%;">
				  		<col style="width: 20%;">
				  		<col style="width: 20%;">
				  		<col style="width: 20%;">
				  	</colgroup>
					<thead>
					  <tr>
						<th>No</th>
						<th>분류</th>
						<th>글쓴이</th>
						<th>글 제목</th>
						<th>작성일</th>
						<th>조회수</th>
					  </tr>
					</thead>
					<tbody>
					<th:block th:if="${#lists.size(uniBoardList) == null}">
						<tr>
							<td colspan="6">작성된 게시글 없습니다.</td>
						</tr>
					</th:block>
					<th:block th:if="${#lists.size(uniBoardList) != 0}">
						<tr th:each="uniBoard, state : ${uniBoardList}">
							<td>[[${state.count}]]</td>
							<td>[[${uniBoard.cateName}]]</td>
							<td>[[${uniBoard.boardWriter}]]</td>
							<td th:if="${uniBoard.isPrivate !='N'} and ${uniBoard.replyCnt != 0}">
								<a href="#" th:onclick="checkPwd( [[${uniBoard.isPrivate}]] , [[${uniBoard.boardNo}]], [[${menuCode}]], [[${subMenuCode}]], [[${uniBoard.readCnt}]]);" class="title"> 
									🔒 [[${uniBoard.boardTitle}]]  <span class="replyColor">([[${uniBoard.replyCnt}]])</span>
								</a>
							</td>
							<td th:if="${uniBoard.isPrivate !='N'} and ${uniBoard.replyCnt == 0}">
								<a href="#" th:onclick="checkPwd( [[${uniBoard.isPrivate}]] , [[${uniBoard.boardNo}]], [[${menuCode}]], [[${subMenuCode}]], [[${uniBoard.readCnt}]]);" class="title"> 
									🔒 [[${uniBoard.boardTitle}]]
								</a>
							</td>
							<td th:if="${uniBoard.isPrivate =='N'} and ${uniBoard.replyCnt != 0}">
								<a th:href="@{/board/boardDetail(menuCode=${menuCode}, subMenuCode=${subMenuCode}, boardNo=${uniBoard.boardNo}, readCnt=${uniBoard.readCnt} )}" class="title">
									[[${uniBoard.boardTitle}]]  <span class="replyColor">([[${uniBoard.replyCnt}]])</span>
								</a>
							</td>
							<td th:if="${uniBoard.isPrivate =='N'} and ${uniBoard.replyCnt == 0}">
								<a th:href="@{/board/boardDetail(menuCode=${menuCode}, subMenuCode=${subMenuCode}, boardNo=${uniBoard.boardNo}, readCnt=${uniBoard.readCnt} )}" class="title">
									[[${uniBoard.boardTitle}]] 
								</a>
							</td>
							<td>[[${uniBoard.regBoardDate}]]</td>
							<td>[[${uniBoard.readCnt}]]</td>
						</tr>
					</th:block>
					</tbody>
					<tfoot>
					  <tr>
						<td colspan="6" style="text-align: center;">
						  <div class="pagination-container">
							 <nav aria-label="Page navigation example">
							  <ul class="pagination justify-content-center">
							    <li class="page-item" th:classappend="${uniBoardVO.prev ? ' ' : 'disabled'}">
							      <a class="page-link"  th:href="@{/board/board(nowPage=${uniBoardVO.beginPage -1},  menuCode=${menuCode}, subMenuCode=${subMenuCode})}" aria-label="Previous">
							        <span aria-hidden="true">&laquo;</span>
							      </a>
							    </li>
							    <li class="page-item" th:each="pageNum : ${#numbers.sequence(uniBoardVO.beginPage,uniBoardVO.endPage)}">
							    	<a th:classappend="${uniBoardVO.nowPage == pageNum ? 'active' : ' '}" class="page-link" th:href="@{/board/board(nowPage=${pageNum} , menuCode=${menuCode}, subMenuCode=${subMenuCode})}">[[${pageNum}]]</a>
							    </li>
							    <li class="page-item" th:classappend="${uniBoardVO.next ? ' ' : 'disabled'}">
							    	<a class="page-link" th:href="@{/board/board(nowPage=${uniBoardVO.endPage + 1},  menuCode=${menuCode}, subMenuCode=${subMenuCode})}" aria-label="Next"><span aria-hidden="true">&raquo;</span>
							      </a>
							    </li>
							  </ul>
							</nav>
						  </div>
						</td>
					  </tr>
					</tfoot>
				  </table>
				  </div>
				</div>
			  </div>
			</div>
	<div class="row">
		<div class="col text-end"> 
		<!-- bootstrap에서 이미 디자인한 것을 끌어온 것이다. -->
				
		</div>
	</div>



<div class="boardWriterGoSize">
 <button class="btn btn-danger boardWriteGo"><span data-bs-toggle="modal" data-bs-target="#writeModal" style="cursor: pointer;">글쓰기 </span> </button>
</div>
<!-- 글쓰기 모달 -->
<div class="modal fade" id="writeModal" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">게시글 작성</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
   
	      <div class="modal-body">
						<form class="row g-3" th:action="@{/stuMenu/boardWrite}" method="post"> <!-- 라벨(label) 안써도됨.  -->
							<input type="hidden" th:value="${menuCode}" name="menuCode"> 
							<input type="hidden" th:value="${subMenuCode}" name="subMenuCode"> 
							<div>						
							<label for="memId" class="form-label">작성자 : </label> 							
								<th:block th:each="member : ${memberVO}">
									<input type="hidden" class="boardWriter" th:name="boardWriter" th:value="${member.memNo}">
									<div sec:authorize="hasRole('ROLE_ADMIN')">
										<input type="hidden" class="deptNo" th:value="${member.empVO.deptNo}">
									</div>
									<div sec:authorize="hasRole('ROLE_PRO')">
										<input type="hidden" class="deptNo" th:value="${member.empVO.deptNo}">
									</div>
									<div sec:authorize="hasRole('ROLE_STU')">
										<input type="hidden" class="deptNo" th:value="${member.stuVO.deptNo}">
									</div>
									[[${member.memName}]] / [[${member.memNo}]]
								</th:block>
							</div>
 							<div class="col-9"> 
								<label for="memId" class="form-label">카테고리</label> 
								<select th:name="cateNo" class="cateNo">
									<th:block th:each="boardCategory : ${boardCategoryVO}">
										<option th:value="${boardCategory.cateNo}">[[${boardCategory.cateName}]]</option>
									</th:block>
								</select>
							</div>						
							<!-- <div class="my-invalid"> ID가 잘못됬어요.</div> -->
							
							<div class="col-12">
								<label for="boardTitle" class="form-label">게시글 제목</label> 
								<input type="text" class="form-text boardTitle" id="boardTitle" name="boardTitle" placeholder="제목을 입력하세요.">
							</div>							
							<br>
							<div class="col-12">
								<label for="boardContent" class="form-label">게시글 내용</label> 
								<textarea class="form-control boardContent" rows="10" cols="50" name="boardContent"></textarea>
							</div>
							<div class="col-12">
								<label for="boardTitle" class="form-label">첨부 파일 </label> 
								<input type="radio" > 예 
							</div>
							<div class="col-12">
								<div class="col-3" >
									<label for="boardTitle" class="form-label">비밀글 여부 : </label> 
									<input type="radio" class="isPrivate" name="isPrivate" value="Y" onclick="private();"> 예 
									<input type="radio" class="isPrivate" name="isPrivate" value="N" checked onclick="noPrivate();"> 아니오
								</div>
								<div class="pwd">
									<span class="inputPwd"></span>
								</div>
								<div class="col-3">
									<label for="boardTitle" class="form-label">공지사항 여부 : </label> 
									<input type="radio" class="isNotice" name="isNotice" value="Y" > 예 
									<input type="radio" class="isNotice" name="isNotice" value="N" checked> 아니오
								</div>
							</div>					
							<br>
							<div class="col-6 d-grid">
							
								<input type="button" value="게시글 등록" class="btn btn-primary" th:onclick="success([[${menuCode}]], [[${subMenuCode}]]);">
						</div>
						</form>					
			</div>
    </div>
  </div>
</div>
		  </div>
	</div>
</div>	

</th:block>


<th:block layout:fragment="content_js">
<script type="text/javascript" src="/js/content/publicBoard/totalBoard.js"></script>
</th:block>

</html>