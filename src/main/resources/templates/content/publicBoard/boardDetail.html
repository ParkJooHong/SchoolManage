<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{fragment/__${memLayOut}___layout}">

<th:block layout:fragment="content_css">
   <link rel="stylesheet" href="/css/content/stu/stu_board/boardDetail.css">
</th:block>

<th:block layout:fragment="content">


<input type="hidden" th:value="${memberVO.memNo}" class="stuNo">

<th:block th:each="boardCategoryVO : ${boardCategoryVO}">
	<div>		
		<span th:text="${boardCategoryVO.cateName}"></span>
	</div>
</th:block>

	<input type="hidden" th:value="${menuCode}" class="menuCode" >
	<input type="hidden" th:value="${subMenuCode}" class="subMenuCode" >
	<div class="detail_info" >
	<table class="table" th:each="uni , state: ${uniBoardVO}">
		

		<thead>
			<tr>
				<td colspan="3" class="boardTitle"><h1>[[${uni.boardTitle}]]</h1></td>		
				<td><input type="hidden" th:value="${uni.boardNo}" class="boardNo"></td>		
			</tr>
			<tr>
				<td colspan="5">
					<table>
						<tr>
						
							<td rowspan="2">
								<th:block th:if="${memberVO.memImgVO != null}">
									<img th:src="${'/image/memImg/' + memberVO.memImgVO.attachedFileName}" height="90px;" width="80px;">
								</th:block>
							</td>
							<td> [[${uni.boardWriter}]]</td>
							
						</tr>
						<tr>
							<td>[[${uni.regBoardDate}]] 조회 [[${uni.readCnt}]]</td>
						</tr>
					</table>
				</td>
				
			</tr>
		</thead>
		<tbody>
			<tr>
				<td colspan="5" class="boardContent">[[${uni.boardContent}]]</td>

			</tr>
		</tbody>

		<!-- 글쓴이가 맞으면 수정, 삭제 가능 -->	
		<tr th:if="${memberVO.memNo == uni.boardWriter}">
			<td class="updateOrDelete" colspan="5">
				<input type="button" value="수정" class="btn btn-primary" th:onclick="updateBoard( [[${uni.boardContent}]] , [[${uni.boardTitle}]] ,[[${uni.boardNo}]] )">
				<input type="button" value="삭제" class="btn btn-danger" th:onclick="deleteBoard([[${uni.boardNo}]], [[${menuCode}]] , [[${subMenuCode}]])">
			</td>
		</tr>
		<tr>
		<td>
			<div class="row">
			      <div class="col-2">이전글</div>
			      <div class="col-10">
			         <th:block th:if="${prevList.boardNo} == null">
			            <span>[[${prevList.boardTitle}]]</span>
			         </th:block>
			         <th:block th:unless="${prevList.boardNo} == null">
			            <span th:onclick="prev([[${prevList.boardNo}]], [[${prevList.readCnt}]], [[${menuCode}]] , [[${subMenuCode}]]);" style="cursor: pointer;">[[${prevList.boardTitle}]]</span>
			         </th:block>
			      </div>
	  		</div> 
	  	</td>	  
  		<td>
		   <div class="row">
		      <div class="col-2">다음글</div>
		      <div class="col-10" >
		         <th:block th:if="${nextList.boardNo} == null">
		            <span>[[${nextList.boardTitle}]]</span>
		         </th:block>
		         <th:block th:unless="${nextList.boardNo} == null">
		            <span th:onclick="next([[${prevList.boardNo}]], [[${prevList.readCnt}]], [[${menuCode}]] , [[${subMenuCode}]]);" style="cursor: pointer;">[[${nextList.boardTitle}]]</span>
		         </th:block>
		      </div>
		   </div>  
		   </td>	  
   		</tr>
	</table>	
		

	</div>
	<br>
	<h3>댓글</h3>

	<th:block th:if="${#lists.size(boardReplyVO) == 0}">
		<table class="noReplyTable">
			<tr >
				<td class="noReply">달린 댓글이 없습니다. 댓글을 등록해보세요.</td>
			</tr>
		</table>
		<table class="noReplyTable">
			<tr th:each="member : ${memberVO}">
				<td>[[${member.memName}]]  / [[${member.memNo}]]</td>
			</tr>	
			 <tr class="comment-form reply"> 
			 	<td>
		    		<textarea id="comment-input" placeholder="댓글을 남겨보세요" class="replyContent"></textarea>
		   			<a href="javascript:void(0);" th:onclick="insertReply(	[[${menuCode}]] , [[${subMenuCode}]]);">등록</a>		   		
		 	 	</td>
		 	 </tr>
		</table>	
	</th:block>
	<th:block th:if="${#lists.size(boardReplyVO) != 0}">
		<table th:each="boardReply : ${boardReplyVO}">
			<tr >
				<input type="hidden" th:value="${boardReply.replyNo}" class="replyNo" >
				<input type="hidden" th:value="${menuCode}" class="menuCode" >
				<input type="hidden" th:value="${subMenuCode}" class="subMenuCode" >
				<td rowspan="2">🧖‍♀️</td>							
				<td>[[${boardReply.replyWriter}]]</td>		
				<td rowspan="2" th:if="${memberVO.memNo == boardReply.replyWriter}" class="upOrDe">
					<input type="button" th:onclick="replyUpdate( [[${boardReply.replyContent}]] ,[[${menuCode}]] , [[${subMenuCode}]])" value="✅">  
					<input type="button" th:onclick="replyDelete([[${boardReply.replyWriter}]] , [[${boardReply.replyNo}]] , [[${menuCode}]] , [[${subMenuCode}]])" value="❎">
				</td>					
			</tr>
			<tr>
				<td class="replyText">[[${boardReply.replyContent}]]</td>			
			</tr>
		</table>
		<table >
			<tr class="replyTable" th:each="member : ${memberVO}">
				<td>[[${member.memNo}]]</td>
			</tr>	
			 <tr class="comment-form reply"> 
			 	<td>
		    		<textarea id="comment-input" placeholder="댓글을 남겨보세요" class="replyContent"></textarea>
		   			<a href="javascript:void(0);" th:onclick="insertReply(	[[${menuCode}]] , [[${subMenuCode}]]);">등록</a>
		   		
		 	 	</td>
		 	 </tr>
		</table>	
	</th:block>



</th:block>


<th:block layout:fragment="content_js">
<script type="text/javascript" src="/js/content/publicBoard/boardDetail.js"></script>
</th:block>

</html>