<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{fragment/__${memLayOut}___layout}"
   >

<!-- 연결해야 할 외부 css 파일  -->
<th:block layout:fragment="content_css">
	<link rel="stylesheet" href="">
</th:block>	

<th:block layout:fragment="content">
	<div class="row">
		<div class="col-10">			
			<div class="row mt-3 mb-3">
				<div class="col">
					<h3>게시글 상세 내용</h3>
				</div>
			</div>
			<div class="row mb-2">
				<div class="col-8" style="font-size: 17px;">
					글 제목 : [[${boardMap['boardDetail'].boardTitle}]]
				</div>
				<div class="col-4 text-end">
					작성일 : [[${boardMap['boardDetail'].regBoardDate}]]				
				</div>
			</div>
			<div class="row mb-3">
				<div class="col-10">
					작성자 : [[${boardMap['boardDetail'].boardWriter}]]
				</div>
				<div class="col-2 text-end">
					조회수 : [[${boardMap['boardDetail'].readCnt}]]
				</div>
			</div>		
			<div class="row mb-3">
				<div class="col-12">
					글 내용 : [[${boardMap['boardDetail'].boardContent}]]
				</div>
			</div>
			<div class="row justify-content-start mb-5">
				<th:block th:if="${#authentication.name == boardMap['boardDetail'].boardWriter || #authorization.expression('hasRole(''ROLE_ADMIN'')')}">
					<div class="col-1 d-grid">
						<input type="button" value="수정" th:onclick="setBoardDetail([[${boardMap['boardDetail'].boardNo}]]);" class="btn btn-success">
					</div>
					<div class="col-1 d-grid">
						<input type="button" value="삭제" th:onclick="delBoardDetail([[${boardMap['boardDetail'].boardNo}]]);" class="btn btn-danger">
					</div>
				</th:block>
			</div>
			<div class="row mb-5">
				<div class="col">※ 총 [[${#lists.size(boardMap['replyList'])}]] 개의 댓글이 있습니다.</div>
			</div>
			<div class="row mb-3" id="replyIct">
				<div class="col-7">
					<input type="text" placeholder="댓글 작성" class="form-control">
				</div>
				<div class="col-1 text-center">
					<label>비밀글 여부</label>
					<input type="radio" name="isPrivate" class="form-check-input" onchange="radioCtrl(this);" value="Y">&nbsp; Y
					<input type="radio" name="isPrivate" class="form-check-input" onchange="radioCtrl(this);" checked value="N">&nbsp; N
				</div>
				<div class="col-3" id="replyPwDiv">
					
				</div>
				<div class="col-1 d-grid">
					<input type="button" class="btn btn-success" th:onclick="regReply([[${boardMap['boardDetail'].boardNo}]]);" value="등록">
				</div>
			</div>
			<div class="row mb-5">
				<div class="col-12" id="replyList">
					<th:block th:if="${#lists.size(boardMap['replyList']) == 0}">
						등록된 댓글이 없습니다.
					</th:block>
					<th:block th:unless="${#lists.size(boardMap['replyList']) == 0}">
						<th:block th:each="reply,state:${boardMap['replyList']}">
							<th:block th:if="${reply.isPrivate == 'N'}">
									댓글번호 : [[${#lists.size(boardMap['replyList']) - state.index}]]<br>
									작성자 : [[${reply.replyWriter}]]<br>
									내용 : [[${reply.replyContent}]]<br>
									<div class="mb-3"></div>
							</th:block>
							<th:block th:if="${reply.isPrivate == 'Y'}">
								비밀글 입니다 비밀번호를 입력하세요 &nbsp; <input type="password"> <input type="button" class="btn btn-success" value="확인">
							</th:block>
						</th:block>
					</th:block>
				</div>
			</div>
		</div>
	</div>
</th:block>

<!-- 연결해야 할 외부 js 파일 -->
<th:block layout:fragment="content_js">
	<script type="text/javascript" src="/js/content/board/board_detail.js"></script>
</th:block>	

</html>