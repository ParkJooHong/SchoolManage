<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{fragment/admin_layout}"
   >

<!-- 연결해야 할 외부 css 파일  -->
<th:block layout:fragment="content_css">
	<link rel="stylesheet" href="/css/content/admin/update_stu_out.css">
</th:block>	

<th:block layout:fragment="content">
	<div class="row container">
		<div class="col-12">
			<div class="row mt-4 mb-4">
				<div class="col page_title">
					<h1>학사경고 현황</h1>
				</div>
			</div>		
			<div class="row mb-3">
				<div class="col">
					<span>학생조회</span>
				</div>
			</div>
			<div class="row mb-3">
				<div class="col-12">
					<table class="table">
						<colgroup>
							<col width="10%">
							<col width="35%">
							<col width="10%">
							<col width="35%">
							<col width="10%">
						</colgroup>
						<tr>
							<td>소속대학</td>
							<td>
								<select class="form-select" id="collSelect" onchange="getDeptList();">
									<option value="">전체</option>
									<th:block th:each="coll :${collList}">
										<option th:value="${coll.collNo}">[[${coll.collName}]]</option>
									</th:block>
								</select>
							</td>
							<td>소속학과</td>
							<td>
								<select class="form-select" id="deptSelect">
									<option value="">전체</option>
									<th:block th:each="dept : ${deptList}">
										<option th:value="${dept.deptNo}">[[${dept.deptName}]]</option>
									</th:block>
								</select>
							</td>
							<td rowspan="2">
								<input type="button" style="width: 100%; height: 80px;" onclick="getStuInfoList();" class="btn btn-primary" value="Search">
							</td>
						</tr>
						<tr>
							<td>학적</td>
							<td>
								<select class="form-select" id="stuStatus">
									<option value="">전체</option>
									<option value="재학">재학</option>
									<option value="휴학">휴학</option>
									<option value="제적">제적</option>
								</select>
							</td>
							<td>성명</td>
							<td>
								<input type="text" id="stuName" value="" class="form-control">
							</td>							
						</tr>
					</table>
				</div>
			</div>
			<div class="row text-center mb-4">
				<div class="col">
					<span>총 <span id="stuNum">0</span>명의 학생이 검색되었습니다.</span>
				</div>
			</div>
			<div class="row">
				<div class="col-6">
					<span class="blueFont">학생의 학번을 클릭하면 학사경고 창이 열립니다.</span>
				</div>
				<div class="col-6 text-end">
					<span class="blueFont">학사경고 3회시 제적버튼이 활성화 됩니다.</span>
				</div>
			</div>
			<div class="row mb-4">
				<div class="col-12">
					<table class="table align-middle stuOut_table_header">
						<colgroup>
							<col width="12%">
							<col width="17%">
							<col width="17%">
							<col width="17%">
							<col width="12%">
							<col width="12%">
							<col width="*">
						</colgroup>
						<thead>
							<tr>
								<td>이름</td>
								<td>학번</td>
								<td>소속대학</td>
								<td>소속학과</td>
								<td>학적</td>
								<td>학사경고</td>
								<td>제적</td>
							</tr>
						</thead>
						<tbody class="probTbody">
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
<!-- 학사경고 모달  -->	
<div class="modal fade" id="probModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">학사경고</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
		<div class="row">
			<div class="col-10">
				<table class="table">
					<colgroup>
						<col width="10%">
						<col width="40%">
						<col width="10%">
						<col width="40%">
					</colgroup>
					<tr>
						<td id="memInfo" colspan="4"></td>
					</tr>
					<tr>
						<td>주소</td>
						<td id="memAddr" colspan="3"></td>
					</tr>
					<tr>
						<td>연락처</td>
						<td id="memTell" colspan="3"></td>
					</tr>
				</table>
				<table class="table">
					<colgroup>
						<col width="10%">
						<col width="40%">
						<col width="10%">
						<col width="40%">
					</colgroup>
					<tr>
						<td>학년</td>
						<td id="memYear"></td>
						<td>학적</td>
						<td id="memStatus"></td>
					</tr>
					<tr>
						<td>전공대학</td>
						<td id="collName"></td>
						<td>전공학과</td>
						<td id="deptName"></td>
					</tr>
				</table>
			</div>
			<div class="col-2">
				<img id="memImg" src="" width="100%">
			</div>
		</div>
		<div class="row">
			<div class="col">
				<table class="table semTable">
					<colgroup>
						<col width="20%">
						<col width="30%">
						<col width="10%">
						<col width="30%">
						<col width="10%">
					</colgroup>
					<tr>
						<td>경고학기</td>
						<td>
							<select class="form-select" id="stuYear">
								<option value="2023">2023</option>
								<option value="2024">2024</option>
								<option value="2025">2025</option>
							</select>
						</td>
						<td>년도</td>
						<td>
							<select class="form-select" id="stuSem">
								<option value="1">1</option>
								<option value="2">2</option>
							</select>
						</td>
						<td>학기</td>
					</tr>
					<tr>
						<td>경고사유</td>
						<td colspan="4">
							<select class="form-select" id="reason">
								<option value="학칙위반">학칙위반</option>
								<option value="등록금 미납">등록금 미납</option>
								<option value="복학불이행">복학불이행</option>
								<option value="이수학점미달">이수학점미달</option>
							</select>
						</td>
					</tr>
				</table>
			</div>
		</div>
		<div class="row text-center">
			<div class="col">
				<h5>누적 경고 현황</h5>
			</div>
		</div>
		<div class="row">
			<div class="col">
				<table class="table">
					<colgroup>
						<col width="50%">
						<col width="50%">
					</colgroup>
						<tr>
							<td>일자</td>
							<td>사유</td>
						</tr>
					<tbody id="probTbody"></tbody>
				</table>
			</div>
		</div>
      </div>
      <div class="modal-footer acceptBtn">
      	<input type="button" value="승인하기" onclick="regProbStu();" class="btn btn-lg btn-primary">
      </div>
    </div>
  </div>
</div>	

<!-- 제적처리 모달  -->
<div class="modal fade" id="dismissalModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">제적처리</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
		<div class="row">
			<div class="col-10">
				<table class="table">
					<colgroup>
						<col width="10%">
						<col width="40%">
						<col width="10%">
						<col width="40%">
					</colgroup>
					<tr>
						<td id="disMemInfo" colspan="4"></td>
					</tr>
					<tr>
						<td>주소</td>
						<td id="disMemAddr" colspan="3"></td>
					</tr>
					<tr>
						<td>연락처</td>
						<td id="disMemTell" colspan="3"></td>
					</tr>
				</table>
				<table class="table">
					<colgroup>
						<col width="10%">
						<col width="40%">
						<col width="10%">
						<col width="40%">
					</colgroup>
					<tr>
						<td>학년</td>
						<td id="disMemYear"></td>
						<td>학적</td>
						<td id="disMemStatus"></td>
					</tr>
					<tr>
						<td>전공대학</td>
						<td id="disCollName"></td>
						<td>전공학과</td>
						<td id="disDeptName"></td>
					</tr>
				</table>
			</div>
			<div class="col-2">
				<img id="disMemImg" src="" width="100%">
			</div>
		</div>
		<div class="row mt-3 mb-3">
			<div class="col">
				<table class="table">
					<colgroup>
						<col width="50%">
						<col width="50%">
					</colgroup>
					<tr>
						<td>제적사유</td>
						<td>
							<input type="text" class="form-control" id="dismissalReson" value="">
						</td>
					</tr>
				</table>
			</div>
		</div>
		<div class="row text-center mb-3">
			<div class="col">
				<h5>누적 경고 현황</h5>
			</div>
		</div>
		<div class="row mt-3">
			<div class="col">
				<table class="table">
					<colgroup>
						<col width="50%">
						<col width="50%">
					</colgroup>
						<tr>
							<td>일자</td>
							<td>사유</td>
						</tr>
					<tbody id="disTbody"></tbody>
				</table>
			</div>
		</div>
      </div> 
	  <div class="modal-footer dismissalBtn">
	      <input type="button" value="승인하기" onclick="regDismissalStu();" class="btn btn-lg btn-primary">
      </div>
    </div>
  </div>
</div>	
</th:block>

<!-- 연결해야 할 외부 js 파일 -->
<th:block layout:fragment="content_js">
	<script type="text/javascript" src="/js/content/admin/update_stu_out.js"></script>
</th:block>	

</html>