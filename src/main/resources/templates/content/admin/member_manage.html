<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{fragment/admin_layout}">
  
<!-- 연결해야 할 외부 css파일 -->  
<th:block layout:fragment="content_css">
  	<!-- <link rel="stylesheet" href=""> -->
</th:block>

<th:block layout:fragment="content">
	<div class="row mainContainer">
		<div class="col-12">
			<div class="row mb-3 mt-3">
				<div class="col page_title">
					<h3>회원관리</h3>
				</div>
			</div>
			<div class="row mb-5">
				<div class="col-12">
					<table class="table text-center">
						<colgroup>
							<col width="5%">
							<col width="10%">
							<col width="10%">
							<col width="25%">
							<col width="15%">
							<col width="15%">
						</colgroup>
						<thead>
							<tr>
								<td>
									<input class="allMemChk" type="checkbox" value="all" onclick="allCheckBox()">
								</td>
								<td>회원코드</td>
								<td>회원종류</td>
								<td>학과</td>
								<td>이름</td>
								<td>회원상태</td>
							</tr>
						</thead>
						<tbody class="boardTbody">
							<th:block th:each="member, state : ${memberList}">
								<tr>
									<td>
										<input class="memChk" type="checkbox" value="${member['MEM_NO']}" onclick="checkBox()"
										th:data-mem-no="${member['MEM_NO']}"
										th:data-mem-status="${member['MEM_STATUS']}">
									</td>
									<td>[[${member['MEM_NO']}]]</td>
									<td>[[${member['MEM_ROLE']}]]</td>
									<td>[[${member['DEPT_NAME']}]]</td>
									<td>[[${member['MEM_NAME']}]]</td>
									<td>
										<span>
											<input type="radio" th:name="${'memStatus-' + state.index}" value="Y" th:checked="${member['MEM_STATUS'] == 'Y'}" onclick="updateMemStatus(this,'Y')">Y
											<input type="radio" th:name="${'memStatus-' + state.index}" value="N" th:checked="${member['MEM_STATUS'] == 'N'}" onclick="updateMemStatus(this,'N')">N
										</span>
									</td>
								</tr>
							</th:block>
						</tbody>
					</table>
				</div>
				<div class="col-10"></div>
				<div class="col-2 d-block text-right">
					<div class="d-grid">
						<input class="btn btn-primary" type="button" value="수정" onclick="memStatusUpdate()">
					</div>
				</div>				
			</div>
				<div class="row">
					<div class="col">
						<div class="row justify-content-center">
							<div class="col-3">
								<nav aria-label="Page navigation example">
								  <ul class="pagination justify-content-center">
								    <li class="page-item" th:classappend="${memberVO.prev ? '' : 'disabled'}">
								      <a class="page-link" href="javascript:void(0);" th:onclick="getOrderListPaging([[${memberVO.beginPage-1}]])"  aria-label="Previous">
								        <span aria-hidden="true">&laquo;</span>
								      </a>
								    </li>
								    	<li class="page-item" th:each="pageNum : ${#numbers.sequence(memberVO.beginPage,memberVO.endPage)}">
								    		<a class="page-link" th:classappend="${memberVO.getNowPage == pageNum ? 'active' : ''}" th:onclick="getOrderListPaging([[${pageNum}]])">[[${pageNum}]]</a>
								    	</li>
								    <li class="page-item" th:classappend="${memberVO.next ? '' : 'disabled'}">
								      <a class="page-link" href="javascript:void(0);" th:onclick="getOrderListPaging([[${memberVO.endPage+1}]])" aria-label="Next">
								        <span aria-hidden="true">&raquo;</span>
								      </a>
								    </li>
								  </ul>
								</nav>
							</div>
						</div>
					</div>
				</div>
			<form action="/admin/memberManage" method="post" id="searchForm">
			<input type="hidden" name="nowPage" id="nowPage" th:value="${memberVO.nowPage}">
			<div class="row">
				<div class="col-3"></div>
				<div class="col-6">
					<table class="table mem_manage_search_table">
						<colgroup>
							<col width="30%">
							<col width="30%">
							<col width="20%">
							<col width="20%">
						</colgroup>
						<tbody class="mem_manage_search_wrap">
							<tr>
								<td><select class="form-select" id="searchKeyword" name="searchKeyword">
										<option value="all" th:selected="${searchVO.searchKeyword == 'all'}">전체</option>
										<option value="dept" th:selected="${searchVO.searchKeyword == 'dept'}">학과</option>
										<option value="memName" th:selected="${searchVO.searchKeyword == 'memName'}">이름</option>
								</select></td>
								<td colspan="2"><input type="text" id="searchValue"
									name="searchValue" class="form-control" th:value="${searchVO.searchValue}"></td>
								<td>
									<div class="d-grid">
										<input type="button" value="검색"
										onclick="searchByStatusInBoard();" class="btn btn-primary">
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="col-3"></div>
			</div>
			</form>
		</div>
	</div>
</th:block>

<!-- 연결해야 할 외부 js파일 -->
<th:block layout:fragment="content_js">
  	<script type="text/javascript" src="/js/content/admin/member_manage.js"></script>
</th:block>
</html>