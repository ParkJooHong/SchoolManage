<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{fragment/info_layout}">

<th:block layout:fragment="content_css">
   <link rel="stylesheet" href="/css/content/info/stu_board/donation.css">
   <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</th:block>

<th:block layout:fragment="content">

<br>
<div style="text-align: center;"></div>

<header class="bg-info py-5">
	<div class="container px-4 px-lg-5 my-5">
		<div class="row justify-content-center">
		  <div class="col-lg-6">
			<div class="text-center text-white">
			  <h1 class="display-4 fw-bolder">KH 중고나눔</h1>
			  <p class="lead fw-normal text-red-50 mb-0">
				<div class="donation">
					나눔 하기 버튼을 클릭해보세요!
					<br>
					<button class="btn btn-danger donation">
						<span data-bs-toggle="modal" data-bs-target="#donationModal" style="cursor: pointer;">나눔하기 </span> 
					</button>
			  </p>
			</div>
		  </div>
		</div>
	  </div>
</header>




<!-- 중고상품 등록하기 모달 -->
<!-- Modal for Donation -->
<div class="modal fade" id="donationModal" tabindex="-1" role="dialog" aria-labelledby="donationModalLabel" aria-hidden="true">
	<div class="modal-dialog">
	  <div class="modal-content">
		<div class="modal-header">
		  <h5 class="modal-title" id="donationModalLabel">기부하기</h5>
		  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		</div>
		<div class="modal-body">
		  <form id="donationForm" class="row g-3" th:action="@{/donation/regDonation}" method="post" enctype="multipart/form-data">
			<div class="col-12">
			  <label for="donationName" class="form-label">중고품 이름</label> 
			  <input type="text" class="form-text donationName" id="donationName" name="donationName" placeholder="이름입력!">
			</div>
			<br>
			<div class="col-12">
			  <label for="donationPrice" class="form-label">중고품 가격</label> 
			  <input type="text" class="form-text donationPrice" id="donationPrice" name="donationPrice" placeholder="가격입력!">
			</div>
			<div class="col-12">
			  <label for="donationContent" class="form-label">중고품 내용</label> 
			  <textarea class="form-control donationContent" rows="10" cols="50" name="donationContent"></textarea>
			</div>
			<div class="col-12">
			  <label for="imgPath" class="form-label">상품 이미지 업로드</label>
			  <input type="file" class="form-control" id="imgPath" name="mainImg">
			</div>
			<br>
			<div class="col-6 d-grid">
			  <input type="button" value="중고품 등록" class="btn btn-primary" onclick="insertDonation();">
			</div>
		  </form>
		</div>
		<div class="modal-footer">
		  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
		</div>
	  </div>
	</div>
  </div>
  

<!-- Section-->
<div class="detail_info">
    <div class="card">
        <div class="card-header">
            <h5 class="card-title fs-4 badge bg-primary text-wrap  d-flex justify-content-center">중고 장터 목록</h5>
        </div>
        <div class="card-bo
		dy">
            <div class="row row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
                <div class="col mb-4" th:each="donation, state : ${donationDataList}">
                    <div class="card h-100">
                        <!-- 상품이미지 -->
						<img th:src="${'/image/donation/' + donation.donationBoardImageVO.attachedFileName}" style="display: block; margin: 0 auto;" width="200px" height="200px" />						
						<div class="card-body p-4">
							<div class="text-center">
                                <!-- 상품 이름이 들어갈 곳 th로 반복 -->
                                <h5 class="fw-bolder" th:text="${donation.donationName}"></h5>
                                <!-- 상품 가격이 들어갈 곳. Thymeleaf로 한국 원 표시 가능하게 만들어보자 -->
                                <span>₩</span><span th:text="${donation.donationPrice}+'원'"></span>
                            </div>
					</div>

                        <div class="card-footer p-4 pt-0 border-top-0 bg-transparent d-flex justify-content-center">
                           
							<button class="btn btn-primary donation" data-bs-toggle="modal" 
							data-bs-target="#donationDetailModal" style="cursor: pointer; margin-right: 10px;">
                                상세보기
                            </button>

							<button class="btn btn-success buy">구입하기</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- 상세보기 모달  -->

<div class="modal fade" id="donationDetailModal" tabindex="-1" role="dialog" aria-labelledby="donationModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
		<div class="d-flex justify-content-center">
        <h3 class="modal-title d-flex justify-content-center" id="donationModalLabel">
			중고상품 상세보기</h3>
		</div>
      </div>

	  <div class="modal-body">
		<div class="col mb-4" th:each="donation, state : ${donationDataList}">
		<div class="container">
		  <main>
			<div class="product-detail">
			  <hr class="one" />
			  <div id="product-overview">
				<h2 class="producut-item" style="margin-top: 0px">
					<hr>
					<h5 class="fw-bolder" th:text="${donation.donationName}"></h5>
				</h2>
				<div class="price-section">
					<span>₩</span><span th:text="${donation.donationPrice}+'원'"></span>
				</div>
				<hr>
				<button type="button" class="btn btn-primary delete-product">삭제하기</button>
				<button type="button" class="btn btn-dark">
				  <span class="button-list">목록</span>
				</button>
				<button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#exampleModal">
				  <span class="button-span-1"><i class="far fa-heart"></i> 좋아요</span>
				</button>
				<div class="product-description">
				  <hr class="one" />
				  <p class="product-buyer-span"></p>
				  <h3>제품 상세 설명</h3>
				  <!--물건 소개가 들어갈 공간 -->
				  <span>
				  </span>
				</div>
			  </div>
			</div>
		  </main>
		</div>
	  </div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js">

</script>
</th:block>


<th:block layout:fragment="content_js">
<script type="text/javascript" src="/js/content/stu/stu_board/donation.js">
	
</script>
</th:block>

</html>