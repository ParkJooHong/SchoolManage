<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	 layout:decorate="~{fragment/__${mem_role}___layout}">

<!-- 연결해야 할 외부 css파일 -->
<th:block layout:fragment="content_css">
	 <link rel="stylesheet" href="/css/content/message/message_list.css"> 
</th:block>

<th:block layout:fragment="content">
	<div class="message_container">
		<nav class="mt-5">
			<div class="nav nav-tabs" id="nav-tab" role="tablist">
				<button class="nav-link active" id="nav-message-list-tab" data-bs-toggle="tab" data-bs-target="#nav-message-list" type="button" role="tab" aria-controls="nav-home" aria-selected="true">메세지목록</button>
				<button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">메세지보내기</button>
			</div>
		</nav>
		<div class="tab-content" id="nav-tabContent">
			<div class="tab-pane fade show active" id="nav-message-list" role="tabpanel" aria-labelledby="nav-message-list-tab" tabindex="0">
				<div class="row mt-2">
					<div class="col-4 convers_list">
						<th:block th:each="convers : ${msgList}">
							<div class="row one_convers" th:onclick="getConversContent([[${convers.recvMemNo}]],[[${convers.memName}]])">
								<div class="col-6 pt-3 mb-2 text-start">
									<h5><strong>[[${convers.memName}]]</strong></h5>
								</div>
								<div class="col-6 pt-3 mb-2 text-end">
									[[${convers.sendTime}]]
								</div>
								<div class="col-6 pb-3 text-start">
									[[${convers.content}]]
								</div>
								<div class="col-6 text-end">
									[[${convers.readChk}]]
								</div>
							</div>
						</th:block>
					</div>			
					<div class="col-7 px-4 convers_content" id="convers_content">
						<div></div>
					</div>			
				</div>
			</div>
			<div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab" tabindex="0">
				<div class="row mt-3">
					<div class="col-8">
						<div class="row">
							<div class="col-12 mb-1">
								받는사람
							</div>
							<div class="col-11 mb-4 dropdown">
								<input class="form-control recvMem" type="text" name="recvName" onkeyup="findMem()">
								<input type="hidden" name="recvMemNo" value="">
								<ul class="col-11" id="memberDropdown">
							</ul>
							</div>
							<div class="col-12">
								메세지 내용
							</div>
							<div class="col-11 mb-4">
								<textarea class="form-control" id="content" rows="5"></textarea>
							</div>
							<div class="col-11 d-grid">
								<button class="btn btn-primary" onclick="sendMessage()">보 내 기</button>
							</div>
						</div>
					</div>			
				</div>
			</div>
		</div>
	</div>
</th:block>

<!-- 연결해야 할 외부 js파일 -->
<th:block layout:fragment="content_js">
	 <script type="text/javascript" src="/js/content/message/message_list.js"></script>
</th:block>
</html>