<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	 layout:decorate="~{fragment/__${mem_role}___layout}">

<!-- 연결해야 할 외부 css파일 -->
<th:block layout:fragment="content_css">
	 <link rel="stylesheet" href="/css/content/message/message_list.css"> 
</th:block>

<th:block layout:fragment="content">
	<div class="message_container">
		<nav class="mt-5">
			<div class="nav nav-tabs" id="nav-tab" role="tablist">
				<button class="nav-link active" id="nav-message-list-tab" data-bs-toggle="tab" data-bs-target="#nav-message-list" type="button" role="tab" aria-controls="nav-home" aria-selected="true">메세지목록</button>
				<button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">메세지보내기</button>
			</div>
		</nav>
		<div class="tab-content" id="nav-tabContent">
			<div class="tab-pane fade show active" id="nav-message-list" role="tabpanel" aria-labelledby="nav-message-list-tab" tabindex="0">
				<div class="row mt-2">
					<div class="col-4 convers_list">
						<th:block th:each="convers : ${msgList}">
							<div class="row one_convers" th:onclick="getConversContent([[${convers.recvMemNo}]],[[${convers.memName}]])">
								<div class="col-6 pt-3 mb-2 text-start">
									<h5><strong>[[${convers.memName}]]</strong></h5>
								</div>
								<div class="col-6 pt-3 mb-2 text-end">
									[[${convers.sendTime}]]
								</div>
								<div class="col-6 pb-3 text-start">
									[[${convers.content}]]
								</div>
								<div class="col-6 text-end">
									<th:block th:if="${convers.readChk == 1}">
										<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><style>svg{fill:#0231ed}</style><path d="M168.2 384.9c-15-5.4-31.7-3.1-44.6 6.4c-8.2 6-22.3 14.8-39.4 22.7c5.6-14.7 9.9-31.3 11.3-49.4c1-12.9-3.3-25.7-11.8-35.5C60.4 302.8 48 272 48 240c0-79.5 83.3-160 208-160s208 80.5 208 160s-83.3 160-208 160c-31.6 0-61.3-5.5-87.8-15.1zM26.3 423.8c-1.6 2.7-3.3 5.4-5.1 8.1l-.3 .5c-1.6 2.3-3.2 4.6-4.8 6.9c-3.5 4.7-7.3 9.3-11.3 13.5c-4.6 4.6-5.9 11.4-3.4 17.4c2.5 6 8.3 9.9 14.8 9.9c5.1 0 10.2-.3 15.3-.8l.7-.1c4.4-.5 8.8-1.1 13.2-1.9c.8-.1 1.6-.3 2.4-.5c17.8-3.5 34.9-9.5 50.1-16.1c22.9-10 42.4-21.9 54.3-30.6c31.8 11.5 67 17.9 104.1 17.9c141.4 0 256-93.1 256-208S397.4 32 256 32S0 125.1 0 240c0 45.1 17.7 86.8 47.7 120.9c-1.9 24.5-11.4 46.3-21.4 62.9zM144 272a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm144-32a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm80 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"/></svg>									
									</th:block>
								</div>
							</div>
						</th:block>
					</div>			
					<div class="col-7 px-4 convers_content" id="convers_content">
						<div></div>
					</div>			
				</div>
			</div>
			<div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab" tabindex="0">
				<div class="row mt-3">
					<div class="col-8">
						<div class="row">
							<div class="col-12 mb-1">
								받는사람
							</div>
							<div class="col-11 mb-4 dropdown">
								<input class="form-control recvMem" type="text" name="recvName" onkeyup="findMem()">
								<input type="hidden" name="recvMemNo" value="">
								<ul class="col-11" id="memberDropdown">
							</ul>
							</div>
							<div class="col-12">
								메세지 내용
							</div>
							<div class="col-11 mb-4">
								<textarea class="form-control" id="content" rows="5"></textarea>
							</div>
							<div class="col-11 d-grid">
								<button class="btn btn-primary" onclick="sendMessage()">보 내 기</button>
							</div>
						</div>
					</div>			
				</div>
			</div>
		</div>
	</div>
</th:block>

<!-- 연결해야 할 외부 js파일 -->
<th:block layout:fragment="content_js">
	 <script type="text/javascript" src="/js/content/message/message_list.js"></script>
</th:block>
</html>