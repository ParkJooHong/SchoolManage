<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="scheduleMapper">

	
	<resultMap type="com.study.test.stu.vo.ScheduleVO" id="schedule">
		<id column="SCD_NO" 			property="scdNo"/>
		<result column="TITLE" 			property="title"/>
		<result column="START_TIME" 			property="startTime"/>
		<result column="END_TIME" 			property="endTime"/>
		<result column="VIEW_TITLE" 			property="viewTitle"/>
		<result column="MEM_NO" 			property="memNo"/>

	</resultMap>
	
	<!-- 일정 조회 -->
	<select id="selectMySchedule" resultMap="schedule">
		SELECT SCD_NO
			, TITLE
			, START_TIME
			, END_TIME
			, VIEW_TITLE
			, MEM_NO
		FROM SCHEDULE
		WHERE MEM_NO = #{memNo}
	</select>
	
	<!-- 일정 등록 -->
	<insert id="regMySchedule">
		INSERT INTO SCHEDULE(
			SCD_NO
			, TITLE
			, START_TIME
			, END_TIME
			, VIEW_TITLE
			, MEM_NO
		) VALUES(
			(SELECT 'SCD_'||LPAD(NVL(MAX(TO_NUMBER(SUBSTR(SCD_NO, 5))), 0) +1 , 3,
			'0')
			FROM SCHEDULE)
			, #{title}
			, #{startTime}
			, #{endTime}
			, #{viewTitle}
			, #{memNo}
		)
	</insert>


</mapper>


























